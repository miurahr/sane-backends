Description: Do not set rpath on build products
 Remove LINKER_RPATH macro and apply
    sed -i -r 's/(hardcode_into_libs)=.*$/\1=no/'
 on the updated configure script.
Author: Julien BLACHE <jblache@debian.org>

--- a/configure.in
+++ b/configure.in
@@ -86,7 +86,7 @@
 AC_SUBST(INCLUDES)
 SANE_SET_CFLAGS([$is_release])
 SANE_SET_LDFLAGS
-SANE_LINKER_RPATH
+dnl SANE_LINKER_RPATH
 
 dnl ***********************************************************************
 dnl Checks for unix variants
--- a/configure
+++ b/configure
@@ -681,7 +681,6 @@
 DYNAMIC_FLAG
 DL_LIBS
 effective_target
-LINKER_RPATH
 STRICT_LDFLAGS
 INCLUDES
 CROSS_COMPILING_FALSE
@@ -702,6 +701,7 @@
 am__fastdepCC_FALSE
 am__fastdepCC_TRUE
 CCDEPMODE
+am__nodep
 AMDEPBACKSLASH
 AMDEP_FALSE
 AMDEP_TRUE
@@ -798,7 +798,6 @@
 with_docdir
 enable_dependency_tracking
 enable_warnings
-enable_rpath
 enable_dynamic
 enable_pthread
 enable_locking
@@ -1471,7 +1470,6 @@
   --disable-dependency-tracking  speeds up one-time build
   --enable-dependency-tracking   do not reject slow dependency extractors
   --enable-warnings       turn on tons of compiler warnings (GCC only)
-  --enable-rpath          use runtime library search path [default=yes]
   --disable-dynamic       Disable dynamic loading of backends
   --enable-pthread        use pthread instead of fork (default=yes for MacOS
                           X/MINGW, no for everything else)
@@ -1510,7 +1508,7 @@
   --with-group            use the specified group for lock dir [default=uucp]
   --with-gphoto2          include the gphoto2 backend [default=yes]
   --with-snmp             enable SNMP support [default=yes]
-  --with-pic              try to use only PIC/non-PIC objects [default=use
+  --with-pic[=PKGS]       try to use only PIC/non-PIC objects [default=use
                           both]
   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]
   --with-sysroot=DIR Search for dependent libraries within DIR
@@ -3067,11 +3065,11 @@
 
 # We need awk for the "check" target.  The system "awk" is bad on
 # some platforms.
-# Always define AMTAR for backward compatibility.
+# Always define AMTAR for backward compatibility.  Yes, it's still used
+# in the wild :-(  We should find a proper way to deprecate it ...
+AMTAR='$${TAR-tar}'
 
-AMTAR=${AMTAR-"${am_missing_run}tar"}
-
-am__tar='${AMTAR} chof - "$$tardir"'; am__untar='${AMTAR} xf -'
+am__tar='$${TAR-tar} chof - "$$tardir"' am__untar='$${TAR-tar} xf -'
 
 
 
@@ -4064,6 +4062,7 @@
 if test "x$enable_dependency_tracking" != xno; then
   am_depcomp="$ac_aux_dir/depcomp"
   AMDEPBACKSLASH='\'
+  am__nodep='_no'
 fi
  if test "x$enable_dependency_tracking" != xno; then
   AMDEP_TRUE=
@@ -4088,6 +4087,7 @@
   # instance it was reported that on HP-UX the gcc test will end up
   # making a dummy file named `D' -- because `-MD' means `put the output
   # in D'.
+  rm -rf conftest.dir
   mkdir conftest.dir
   # Copy depcomp to subdir because otherwise we won't find it if we're
   # using a relative directory.
@@ -4147,7 +4147,7 @@
 	break
       fi
       ;;
-    msvisualcpp | msvcmsys)
+    msvc7 | msvc7msys | msvisualcpp | msvcmsys)
       # This compiler won't grok `-c -o', but also, the minuso test has
       # not run yet.  These depmodes are late enough in the game, and
       # so weak that their functioning should not be impacted.
@@ -5205,44 +5205,6 @@
       ;;
   esac
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether runtime link path should be used" >&5
-$as_echo_n "checking whether runtime link path should be used... " >&6; }
-  # Check whether --enable-rpath was given.
-if test "${enable_rpath+set}" = set; then :
-  enableval=$enable_rpath;
-fi
-
-
-  LINKER_RPATH=
-  if test "x$enable_rpath" != xno; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking linker parameter to set runtime link path" >&5
-$as_echo_n "checking linker parameter to set runtime link path... " >&6; }
-if ${my_cv_LINKER_RPATH+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  my_cv_LINKER_RPATH=
-      case "$host_os" in
-      linux* | freebsd* | netbsd* | openbsd* | irix*)
-        # I believe this only works with GNU ld [pere 2001-04-16]
-        my_cv_LINKER_RPATH="-Wl,-rpath,"
-        ;;
-      solaris*)
-        my_cv_LINKER_RPATH="-R "
-        ;;
-      esac
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $my_cv_LINKER_RPATH" >&5
-$as_echo "$my_cv_LINKER_RPATH" >&6; }
-      LINKER_RPATH="$my_cv_LINKER_RPATH"
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-      LINKER_RPATH=
-fi
-
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
@@ -10618,8 +10580,8 @@
 
 
 
-macro_version='2.4'
-macro_revision='1.3293'
+macro_version='2.4.2'
+macro_revision='1.3337'
 
 
 
@@ -13727,7 +13689,22 @@
 
 # Check whether --with-pic was given.
 if test "${with_pic+set}" = set; then :
-  withval=$with_pic; pic_mode="$withval"
+  withval=$with_pic; lt_p=${PACKAGE-default}
+    case $withval in
+    yes|no) pic_mode=$withval ;;
+    *)
+      pic_mode=default
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+      for lt_pkg in $withval; do
+	IFS="$lt_save_ifs"
+	if test "X$lt_pkg" = "X$lt_p"; then
+	  pic_mode=yes
+	fi
+      done
+      IFS="$lt_save_ifs"
+      ;;
+    esac
 else
   pic_mode=default
 fi
