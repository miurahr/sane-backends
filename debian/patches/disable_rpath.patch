Description: Do not set rpath on build products
 Remove LINKER_RPATH macro and apply
    sed -i -r 's/(hardcode_into_libs)=.*$/\1=no/'
 on the updated configure script.
Author: Julien BLACHE <jblache@debian.org>

--- a/configure.in
+++ b/configure.in
@@ -86,7 +86,7 @@
 AC_SUBST(INCLUDES)
 SANE_SET_CFLAGS([$is_release])
 SANE_SET_LDFLAGS
-SANE_LINKER_RPATH
+dnl SANE_LINKER_RPATH
 
 dnl ***********************************************************************
 dnl Checks for unix variants
--- a/configure
+++ b/configure
@@ -681,7 +681,6 @@
 DYNAMIC_FLAG
 DL_LIBS
 effective_target
-LINKER_RPATH
 STRICT_LDFLAGS
 INCLUDES
 CROSS_COMPILING_FALSE
@@ -798,7 +797,6 @@
 with_docdir
 enable_dependency_tracking
 enable_warnings
-enable_rpath
 enable_dynamic
 enable_pthread
 enable_locking
@@ -1471,7 +1469,6 @@
   --disable-dependency-tracking  speeds up one-time build
   --enable-dependency-tracking   do not reject slow dependency extractors
   --enable-warnings       turn on tons of compiler warnings (GCC only)
-  --enable-rpath          use runtime library search path [default=yes]
   --disable-dynamic       Disable dynamic loading of backends
   --enable-pthread        use pthread instead of fork (default=yes for MacOS
                           X/MINGW, no for everything else)
@@ -4971,6 +4968,7 @@
 
 
 
+
 if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
 	if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
@@ -5204,44 +5202,6 @@
       ;;
   esac
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether runtime link path should be used" >&5
-$as_echo_n "checking whether runtime link path should be used... " >&6; }
-  # Check whether --enable-rpath was given.
-if test "${enable_rpath+set}" = set; then :
-  enableval=$enable_rpath;
-fi
-
-
-  LINKER_RPATH=
-  if test "x$enable_rpath" != xno; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking linker parameter to set runtime link path" >&5
-$as_echo_n "checking linker parameter to set runtime link path... " >&6; }
-if ${my_cv_LINKER_RPATH+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  my_cv_LINKER_RPATH=
-      case "$host_os" in
-      linux* | freebsd* | netbsd* | openbsd* | irix*)
-        # I believe this only works with GNU ld [pere 2001-04-16]
-        my_cv_LINKER_RPATH="-Wl,-rpath,"
-        ;;
-      solaris*)
-        my_cv_LINKER_RPATH="-R "
-        ;;
-      esac
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $my_cv_LINKER_RPATH" >&5
-$as_echo "$my_cv_LINKER_RPATH" >&6; }
-      LINKER_RPATH="$my_cv_LINKER_RPATH"
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-      LINKER_RPATH=
-fi
-
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
@@ -7579,6 +7539,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBV4L_CFLAGS=`$PKG_CONFIG --cflags "libv4l1" 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -7595,6 +7556,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBV4L_LIBS=`$PKG_CONFIG --libs "libv4l1" 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -7614,9 +7576,9 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        LIBV4L_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libv4l1" 2>&1`
+	        LIBV4L_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "libv4l1" 2>&1`
         else
-	        LIBV4L_PKG_ERRORS=`$PKG_CONFIG --print-errors "libv4l1" 2>&1`
+	        LIBV4L_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "libv4l1" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$LIBV4L_PKG_ERRORS" >&5
@@ -7660,6 +7622,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_AVAHI_CFLAGS=`$PKG_CONFIG --cflags " avahi-client >= 0.6.24 " 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -7676,6 +7639,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_AVAHI_LIBS=`$PKG_CONFIG --libs " avahi-client >= 0.6.24 " 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -7695,9 +7659,9 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        AVAHI_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors " avahi-client >= 0.6.24 " 2>&1`
+	        AVAHI_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs " avahi-client >= 0.6.24 " 2>&1`
         else
-	        AVAHI_PKG_ERRORS=`$PKG_CONFIG --print-errors " avahi-client >= 0.6.24 " 2>&1`
+	        AVAHI_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs " avahi-client >= 0.6.24 " 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$AVAHI_PKG_ERRORS" >&5
@@ -9645,6 +9609,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBUSB_1_0_CFLAGS=`$PKG_CONFIG --cflags " libusb-1.0 >= 1.0.0 " 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -9661,6 +9626,7 @@
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBUSB_1_0_LIBS=`$PKG_CONFIG --libs " libusb-1.0 >= 1.0.0 " 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
 fi
@@ -9680,9 +9646,9 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        LIBUSB_1_0_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors " libusb-1.0 >= 1.0.0 " 2>&1`
+	        LIBUSB_1_0_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs " libusb-1.0 >= 1.0.0 " 2>&1`
         else
-	        LIBUSB_1_0_PKG_ERRORS=`$PKG_CONFIG --print-errors " libusb-1.0 >= 1.0.0 " 2>&1`
+	        LIBUSB_1_0_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs " libusb-1.0 >= 1.0.0 " 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$LIBUSB_1_0_PKG_ERRORS" >&5
